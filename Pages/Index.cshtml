@page
@model UcakBiletiSistemi.Pages.IndexModel
@{
    ViewData["Title"] = "Uçuş Arama";
}

<div class="text-center mt-5">
    <h1 class="display-4">Uçak Bileti Arama Sistemi</h1>

    <form method="post" asp-page-handler="Ara" class="my-4 p-4 border rounded">
        <h2>Uçuş Arama</h2>

        <div class="row">
            <div class="col-md-5">
                <label for="kalkis" class="form-label">Nereden:</label>
                <input type="text" asp-for="KalkisSehri" class="form-control" placeholder="Kalkış Şehri" required>
            </div>

            <div class="col-md-5">
                <label for="varis" class="form-label">Nereye:</label>
                <input type="text" asp-for="VarisSehri" class="form-control" placeholder="Varış Şehri" required>
            </div>

            <div class="col-md-2 d-grid">
                <label class="form-label d-block">&nbsp;</label>
                <button type="submit" class="btn btn-primary">Uçuş Ara</button>
            </div>
        </div>
    </form>

    <h2 class="mt-5">Arama Sonuçları (@Model.AramaSonuclari.Count Uçuş)</h2>

    @if (Model.AramaSonuclari.Any())
    {
        <table class="table table-striped mt-3">
            <thead>
                <tr>
                    <th>Uçuş No</th>
                    <th>Kalkış</th>
                    <th>Varış</th>
                    <th>Tarih</th>
                    <th>Boş Koltuk</th>
                    <th>Fiyat</th>
                    <th>İşlem</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var ucus in Model.AramaSonuclari)
                {
                    <tr>
                        <td>@ucus.UcusID</td>
                        <td>@ucus.KalkisSehri</td>
                        <td>@ucus.VarisSehri</td>
                        <td>@ucus.KalkisTarihi.ToString("dd/MM/yyyy")</td>
                        <td>@ucus.BosKoltukSayisi / @ucus.Kapasite</td>
                        <td>@ucus.AnaFiyat TL</td>
                        <td>
                            <a asp-page="RezervasyonYap" asp-route-UcusID="@ucus.UcusID" class="btn btn-success btn-sm">Bilet
                                seç</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p class="mt-3 alert alert-warning">Aradığınız kriterlere uygun uçuş bulunamadı.</p>
    }

</div>